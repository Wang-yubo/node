### 13 HTTPS的基本概念

##### 13.1 HTTPS的基本概念

> 1. 我们需要一种能够提供下列功能的HTTP 安全技术
> 2. 服务器认证（客户端知道它们是在与真正的而不是伪造的服务器通话）。
> 3. 客户端认证（服务器知道它们是在与真正的而不是伪造的客户端通话）。
> 4. 完整性（客户端和服务器的数据不会被修改）。
> 5. 加密（客户端和服务器的对话是私密的，无需担心被窃听）。
> 6. 效率（一个运行的足够快的算法，以便低端的客户端和服务器使用）。
> 7. 普适性（基本上所有的客户端和服务器都支持这些协议）。
> 8. 管理的可扩展性（在任何地方的任何人都可以立即进行安全通信）。
> 9. 适应性（能够支持当前最知名的安全方法）。
> 10. 在社会上的可行性（满足社会的政治文化需要）。
>
> ![image-20200301153102576](..\images\image-20200301153102576.png)
>
> 大部分困难的编码及解码工作都是在SSL 库中完成的，所以Web 客户端和服务器在使用安全HTTP 时无需过多地修改其协议处理逻辑

##### 13.2 HTTPS的基本概念之对称密钥加密技术

> 编/ 解码使用相同密钥的算法。对称密钥加密技术的缺点之一就是发送者和接收者在互相对话之前，一定要有一个共享的保密密钥。
>
> ![image-20200301155933364](..\images\image-20200301155933364.png)
>
> - 在对称密钥加密技术中，发送端和接收端要共享相同的密钥k 才能进行通信。发送端用共享的密钥来加密报文，并将得到的密文发送给接收端。接收端收到密文，并对其应用解密函数和相同的共享密钥，恢复出原始的明文
> - 可用密钥值的数量取决于密钥中的位数，以及可能的密钥中有多少是有效的。就对称密钥加密技术来说，通常所有的密钥值都是有效的。8 位的密钥只有256 个可能的密钥值， 40 位的密钥可以有2^40 个可能的密钥值（大约是一万亿个密钥），128 位的密钥可以产生大约340 000 000 000 000 000 000 000 000 000 000 000 000 个可能的密钥值。现在一般采用的都是128位的加密

##### 13.3 HTTPS的基本概念之公开密钥加密技术

> 公开密钥加密技术没有为每对主机使用单独的加密/ 解密密钥，而是使用了两个非对称密钥：一个用来对主机报文编码，另一个用来对主机报文解码。编码密钥是众所周知的（这也是公开密钥加密这个名字的由来），但只有主机才知道私有的解密密钥
>
> ![image-20200301160049685](..\images\image-20200301160049685.png)

##### 13.4 HTTPS的基本概念之数字签名

> 数字签名是附加在报文上的特殊加密校验码。使用数字签名有以下两个好处。
>
> 1. 签名可以证明是作者编写了这 条报文。只有作者才会有最机密的私有密钥， 因此，只有作者才能计算出这些校验和。校验和就像来自作者的个人“签名”一样。
> 2. 签名可以防止报文被篡改。如果有恶意攻击者在报文传输过程中对其进行了修改，校验和就不再匹配了。由于校验和只有作者保密的私有密钥才能产生，所以攻击者无法为篡改了的报文伪造出正确的校验码。
>
> ![image-20200301160148127](..\images\image-20200301160148127.png)

##### 13.5 HTTPS的基本概念之数字证书

> 数字证书中还包含一组信息，所有这些信息都是由一个官方的“证书颁发机构”以数字方式签发的。基本的数字证书中通常包含一些纸质ID 中常见的内容，比如：
>
> 1. 对象的名称（人、服务器、组织等）；
> 2. 过期时间；
> 3. 证书发布者（由谁为证书担保）；
> 4. 来自证书发布者的数字签名；
>
> 而且，数字证书通常还包括对象的公开密钥，以及对象和所用签名算法的描述性信息。任何人都可以创建一个数字证书，但并不是所有人都能够获得受人尊敬的签发权，从而为证书信息担保，并用其私有密钥签发证书
>
> ![image-20200301161559062](..\images\image-20200301161559062.png)
>
> 通过HTTPS 建立了一个安全Web 事务之后，现代的浏览器都会自动获取所连接服务器的数字证书。如果服务器没有证书，安全连接就会失败。服务器证书中包含很多字段，其中包括：
>
> 1. Web 站点的名称和主机名；
> 2. Web 站点的公开密钥；
> 3. 签名颁发机构的名称；
> 4. 来自签名颁发机构的签名。
>
> ![image-20200301161652465](..\images\image-20200301161652465.png)
>
> 在发送已加密的HTTP 报文之前，客户端和服务器要进行一次SSL 握手，在这个握手过程中，它们要完成以下工作：
>
> 1. 交换协议版本号；
> 2. 选择一个两端都了解的密码；
> 3. 对两端的身份进行认证；
> 4. 生成临时的会话密钥，以便加密信道。
>
> ![image-20200301161740082](..\images\image-20200301161740082.png)